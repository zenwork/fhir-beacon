import {Meta, Source}       from '@storybook/blocks'
import {Patient}          from '../../../resources/index'
import {patient, address} from './extension-reference-complex.story.data'



<Meta title="Components/Datatypes/Special Type/Extension/3. with fhir elements" component={Patient}/>


# Extension (regular, non-modifying)

## references:
* [JSON Representation](http://hl7.org/fhir/R5/json.html#primitive)
* [FHIR Extensibility][1]

[1]  https://www.hl7.org/fhir/extensibility.html "Extensibility - FHIR v5.0.0"

Extensions can be imbedded in complex types, resources, and domain resources. They then present themselves in two distinct forms:

| Kind        | JSON shape                                          | When to use                                                                                   |
|-------------|-----------------------------------------------------|-----------------------------------------------------------------------------------------------|
| **Simple**  | `{ "url":"...", "valueCode":"abc" }`                | The extension instance has a single `value[x]` and **no** nested `extension`.                 |
| **Complex** | `{ "url":"...", "extension":[ …sub-extensions… ] }` | The extension instance contains multiple properties. These can be sliced into logical groups. |

The spec forbids mixing `value[x]` with child `extension` in the same instance. ([hl7.org][1]).

[1]  https://www.hl7.org/fhir/extensibility.html "Extensibility - FHIR v5.0.0"




## Support in `BaseElement`

All custom element that extends `BaseElement` supports extensions. Below are a some of examples


### In a complex type


<div style={{display:"grid", gridTemplateColumns:"1fr 1fr"}}>

    <div>
        <h4>display</h4>
        <fhir-shell mode="display" open>
            <fhir-address label="address with extension" data={address}></fhir-address>
        </fhir-shell>
    </div>
    <div>
        <h4>structure</h4>
        <fhir-shell mode="structure" open>
            <fhir-address label="address with extension" data={address}></fhir-address>
        </fhir-shell>
    </div>
    <div style={{gridColumn:"1 / span 2"}}>
        <h4>data</h4>
        <fhir-shell mode="debug" open>
            <fhir-address label="address with extension" data={address}></fhir-address>
        </fhir-shell>
    </div>
</div>

### In a resource
<div style={{display:"grid", gridTemplateColumns:"1fr 1fr"}}>
    <div>
        <h4>display</h4>
        <fhir-shell mode="display" open>
            <fhir-patient label="patient with extension" data={patient}></fhir-patient>
        </fhir-shell>
    </div>
    <div>
        <h4>structure</h4>
        <fhir-shell mode="structure" open>
            <fhir-patient label="patient with extension" data={patient}></fhir-patient>
        </fhir-shell>
    </div>
</div>
